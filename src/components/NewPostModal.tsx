import React from "react";
import { api } from "../adapters/post";
import { profilesApi } from "../adapters/profiles";
import Modal from "../components/Modal";
import "../css/common.css";
import "../css/edit.css";
import "../css/new-post.css";
import { createUppy, uploadFiles } from "../utils/uppy";

type NewPostModalProps = {
    onClose(): any;
    visible: any;
}

class NewPostModal extends React.Component<NewPostModalProps, any>{

    uppy = createUppy(5);

    constructor(props: any) {
        super(props);
        this.state = {
            description: '',
            files: [],
            accountInfo: {}
        }

    }

    componentDidMount() {
        this.handleChange = this.handleChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
        this.onFilesChanged = this.onFilesChanged.bind(this);

        profilesApi.getAccount((x) => {
            this.setState({
                accountInfo: x
            })
        })
    }

    handleSubmit(event: any) {

        let patch = (photo: any) => {
            console.log(photo)
            api.createPost({
    
                description: this.state.description,
                photos_attributes: photo
            }, () => {
                this.props.onClose();
                window.location.href = "/profile"
            })
            
        }
        if (this.state.files.length != 0) {
            uploadFiles(this.uppy, this.state.files, (x) => {
                if (x.length != 0) {
                    patch(x);
                    return;
                }
            })
        }
        event.preventDefault();
    }

    handleChange(event: any) {
        const target = event.target;
        const value = target.type === 'checkbox' ? target.checked : target.value;
        const name = target.name;

        this.setState({
            [name]: value
        });
    }

    onFilesChanged(event: any) {
        let files: any[] = [];

        for (let file of event.currentTarget.files)
            files.push(file);

        if (files.length) {
            this.setState({
                shownImage: URL.createObjectURL(files[0])
            })
        }

        this.setState({
            files: files
        })
    }

    renderBackground() {
        return (
            <svg width="480" height="345" viewBox="0 0 480 345" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="480" height="345" rx="12" fill="#C9CAD1" />
                <g clip-path="url(#clip0)">
                    <path d="M220.832 194.771C215.495 194.771 210.749 191.354 209.025 186.267L208.908 185.884C208.502 184.537 208.331 183.404 208.331 182.27V159.543L200.245 186.537C199.205 190.507 201.575 194.623 205.551 195.72L257.096 209.524C257.739 209.691 258.383 209.771 259.016 209.771C262.336 209.771 265.37 207.567 266.22 204.32L269.223 194.771H220.832Z" fill="white" />
                    <path d="M229.999 159.77C233.676 159.77 236.665 156.78 236.665 153.103C236.665 149.426 233.676 146.436 229.999 146.436C226.322 146.436 223.332 149.426 223.332 153.103C223.332 156.78 226.322 159.77 229.999 159.77Z" fill="white" />
                    <path d="M271.666 136.435H221.665C217.072 136.435 213.332 140.176 213.332 144.769V181.437C213.332 186.03 217.072 189.77 221.665 189.77H271.666C276.26 189.77 280 186.03 280 181.437V144.769C280 140.176 276.26 136.435 271.666 136.435ZM221.665 143.102H271.666C272.587 143.102 273.333 143.849 273.333 144.769V168.433L262.803 156.146C261.686 154.836 260.069 154.136 258.333 154.096C256.606 154.106 254.986 154.873 253.879 156.2L241.499 171.06L237.465 167.036C235.186 164.756 231.475 164.756 229.199 167.036L219.999 176.233V144.769C219.999 143.849 220.745 143.102 221.665 143.102Z" fill="white" />
                </g>
                <path d="M97.2502 241.88V248.968C97.2502 249.811 97.4689 250.445 97.9062 250.872C98.3542 251.299 98.9729 251.512 99.7622 251.512C100.562 251.512 101.181 251.299 101.618 250.872C102.066 250.445 102.29 249.811 102.29 248.968V241.88H104.114V248.936C104.114 249.843 103.917 250.611 103.522 251.24C103.128 251.869 102.6 252.339 101.938 252.648C101.277 252.957 100.546 253.112 99.7462 253.112C98.9462 253.112 98.2155 252.957 97.5542 252.648C96.9035 252.339 96.3862 251.869 96.0022 251.24C95.6182 250.611 95.4262 249.843 95.4262 248.936V241.88H97.2502ZM108.313 245.48C108.622 245.075 109.044 244.733 109.577 244.456C110.11 244.179 110.713 244.04 111.385 244.04C112.153 244.04 112.852 244.232 113.481 244.616C114.121 244.989 114.622 245.517 114.985 246.2C115.348 246.883 115.529 247.667 115.529 248.552C115.529 249.437 115.348 250.232 114.985 250.936C114.622 251.629 114.121 252.173 113.481 252.568C112.852 252.952 112.153 253.144 111.385 253.144C110.713 253.144 110.116 253.011 109.593 252.744C109.07 252.467 108.644 252.125 108.313 251.72V257.192H106.489V244.184H108.313V245.48ZM113.673 248.552C113.673 247.944 113.545 247.421 113.289 246.984C113.044 246.536 112.713 246.2 112.297 245.976C111.892 245.741 111.454 245.624 110.985 245.624C110.526 245.624 110.089 245.741 109.673 245.976C109.268 246.211 108.937 246.552 108.681 247C108.436 247.448 108.313 247.976 108.313 248.584C108.313 249.192 108.436 249.725 108.681 250.184C108.937 250.632 109.268 250.973 109.673 251.208C110.089 251.443 110.526 251.56 110.985 251.56C111.454 251.56 111.892 251.443 112.297 251.208C112.713 250.963 113.044 250.611 113.289 250.152C113.545 249.693 113.673 249.16 113.673 248.552ZM119.157 241.16V253H117.333V241.16H119.157ZM125.376 253.144C124.544 253.144 123.792 252.957 123.12 252.584C122.448 252.2 121.92 251.667 121.536 250.984C121.152 250.291 120.96 249.491 120.96 248.584C120.96 247.688 121.157 246.893 121.552 246.2C121.946 245.507 122.485 244.973 123.168 244.6C123.85 244.227 124.613 244.04 125.456 244.04C126.298 244.04 127.061 244.227 127.744 244.6C128.426 244.973 128.965 245.507 129.36 246.2C129.754 246.893 129.952 247.688 129.952 248.584C129.952 249.48 129.749 250.275 129.344 250.968C128.938 251.661 128.384 252.2 127.68 252.584C126.986 252.957 126.218 253.144 125.376 253.144ZM125.376 251.56C125.845 251.56 126.282 251.448 126.688 251.224C127.104 251 127.44 250.664 127.696 250.216C127.952 249.768 128.08 249.224 128.08 248.584C128.08 247.944 127.957 247.405 127.712 246.968C127.466 246.52 127.141 246.184 126.736 245.96C126.33 245.736 125.893 245.624 125.424 245.624C124.954 245.624 124.517 245.736 124.112 245.96C123.717 246.184 123.402 246.52 123.168 246.968C122.933 247.405 122.816 247.944 122.816 248.584C122.816 249.533 123.056 250.269 123.536 250.792C124.026 251.304 124.64 251.56 125.376 251.56ZM131.147 248.552C131.147 247.667 131.328 246.883 131.691 246.2C132.064 245.517 132.565 244.989 133.195 244.616C133.835 244.232 134.539 244.04 135.307 244.04C136 244.04 136.603 244.179 137.115 244.456C137.637 244.723 138.053 245.059 138.363 245.464V244.184H140.203V253H138.363V251.688C138.053 252.104 137.632 252.451 137.099 252.728C136.565 253.005 135.957 253.144 135.275 253.144C134.517 253.144 133.824 252.952 133.195 252.568C132.565 252.173 132.064 251.629 131.691 250.936C131.328 250.232 131.147 249.437 131.147 248.552ZM138.363 248.584C138.363 247.976 138.235 247.448 137.979 247C137.733 246.552 137.408 246.211 137.003 245.976C136.597 245.741 136.16 245.624 135.691 245.624C135.221 245.624 134.784 245.741 134.379 245.976C133.973 246.2 133.643 246.536 133.387 246.984C133.141 247.421 133.019 247.944 133.019 248.552C133.019 249.16 133.141 249.693 133.387 250.152C133.643 250.611 133.973 250.963 134.379 251.208C134.795 251.443 135.232 251.56 135.691 251.56C136.16 251.56 136.597 251.443 137.003 251.208C137.408 250.973 137.733 250.632 137.979 250.184C138.235 249.725 138.363 249.192 138.363 248.584ZM141.99 248.552C141.99 247.667 142.172 246.883 142.534 246.2C142.908 245.517 143.409 244.989 144.038 244.616C144.678 244.232 145.388 244.04 146.166 244.04C146.742 244.04 147.308 244.168 147.862 244.424C148.428 244.669 148.876 245 149.206 245.416V241.16H151.046V253H149.206V251.672C148.908 252.099 148.492 252.451 147.958 252.728C147.436 253.005 146.833 253.144 146.15 253.144C145.382 253.144 144.678 252.952 144.038 252.568C143.409 252.173 142.908 251.629 142.534 250.936C142.172 250.232 141.99 249.437 141.99 248.552ZM149.206 248.584C149.206 247.976 149.078 247.448 148.822 247C148.577 246.552 148.252 246.211 147.846 245.976C147.441 245.741 147.004 245.624 146.534 245.624C146.065 245.624 145.628 245.741 145.222 245.976C144.817 246.2 144.486 246.536 144.23 246.984C143.985 247.421 143.862 247.944 143.862 248.552C143.862 249.16 143.985 249.693 144.23 250.152C144.486 250.611 144.817 250.963 145.222 251.208C145.638 251.443 146.076 251.56 146.534 251.56C147.004 251.56 147.441 251.443 147.846 251.208C148.252 250.973 148.577 250.632 148.822 250.184C149.078 249.725 149.206 249.192 149.206 248.584ZM156.99 248.552C156.99 247.667 157.172 246.883 157.534 246.2C157.908 245.517 158.409 244.989 159.038 244.616C159.678 244.232 160.382 244.04 161.15 244.04C161.844 244.04 162.446 244.179 162.958 244.456C163.481 244.723 163.897 245.059 164.206 245.464V244.184H166.046V253H164.206V251.688C163.897 252.104 163.476 252.451 162.942 252.728C162.409 253.005 161.801 253.144 161.118 253.144C160.361 253.144 159.668 252.952 159.038 252.568C158.409 252.173 157.908 251.629 157.534 250.936C157.172 250.232 156.99 249.437 156.99 248.552ZM164.206 248.584C164.206 247.976 164.078 247.448 163.822 247C163.577 246.552 163.252 246.211 162.846 245.976C162.441 245.741 162.004 245.624 161.534 245.624C161.065 245.624 160.628 245.741 160.222 245.976C159.817 246.2 159.486 246.536 159.23 246.984C158.985 247.421 158.862 247.944 158.862 248.552C158.862 249.16 158.985 249.693 159.23 250.152C159.486 250.611 159.817 250.963 160.222 251.208C160.638 251.443 161.076 251.56 161.534 251.56C162.004 251.56 162.441 251.443 162.846 251.208C163.252 250.973 163.577 250.632 163.822 250.184C164.078 249.725 164.206 249.192 164.206 248.584ZM172.89 244.04C173.584 244.04 174.202 244.184 174.746 244.472C175.301 244.76 175.733 245.187 176.042 245.752C176.352 246.317 176.506 247 176.506 247.8V253H174.698V248.072C174.698 247.283 174.501 246.68 174.106 246.264C173.712 245.837 173.173 245.624 172.49 245.624C171.808 245.624 171.264 245.837 170.858 246.264C170.464 246.68 170.266 247.283 170.266 248.072V253H168.442V244.184H170.266V245.192C170.565 244.829 170.944 244.547 171.402 244.344C171.872 244.141 172.368 244.04 172.89 244.04ZM186.769 244.184L181.361 257.144H179.473L181.265 252.856L177.793 244.184H179.825L182.305 250.904L184.881 244.184H186.769ZM194.126 245.48C194.435 245.075 194.856 244.733 195.39 244.456C195.923 244.179 196.526 244.04 197.198 244.04C197.966 244.04 198.664 244.232 199.294 244.616C199.934 244.989 200.435 245.517 200.798 246.2C201.16 246.883 201.342 247.667 201.342 248.552C201.342 249.437 201.16 250.232 200.798 250.936C200.435 251.629 199.934 252.173 199.294 252.568C198.664 252.952 197.966 253.144 197.198 253.144C196.526 253.144 195.928 253.011 195.406 252.744C194.883 252.467 194.456 252.125 194.126 251.72V257.192H192.302V244.184H194.126V245.48ZM199.486 248.552C199.486 247.944 199.358 247.421 199.102 246.984C198.856 246.536 198.526 246.2 198.11 245.976C197.704 245.741 197.267 245.624 196.798 245.624C196.339 245.624 195.902 245.741 195.486 245.976C195.08 246.211 194.75 246.552 194.494 247C194.248 247.448 194.126 247.976 194.126 248.584C194.126 249.192 194.248 249.725 194.494 250.184C194.75 250.632 195.08 250.973 195.486 251.208C195.902 251.443 196.339 251.56 196.798 251.56C197.267 251.56 197.704 251.443 198.11 251.208C198.526 250.963 198.856 250.611 199.102 250.152C199.358 249.693 199.486 249.16 199.486 248.552ZM207.705 244.04C208.377 244.04 208.975 244.184 209.497 244.472C210.031 244.76 210.447 245.187 210.745 245.752C211.055 246.317 211.209 247 211.209 247.8V253H209.401V248.072C209.401 247.283 209.204 246.68 208.809 246.264C208.415 245.837 207.876 245.624 207.193 245.624C206.511 245.624 205.967 245.837 205.561 246.264C205.167 246.68 204.969 247.283 204.969 248.072V253H203.145V241.16H204.969V245.208C205.279 244.835 205.668 244.547 206.137 244.344C206.617 244.141 207.14 244.04 207.705 244.04ZM217.36 253.144C216.528 253.144 215.776 252.957 215.104 252.584C214.432 252.2 213.904 251.667 213.52 250.984C213.136 250.291 212.944 249.491 212.944 248.584C212.944 247.688 213.141 246.893 213.536 246.2C213.931 245.507 214.469 244.973 215.152 244.6C215.835 244.227 216.597 244.04 217.44 244.04C218.283 244.04 219.045 244.227 219.728 244.6C220.411 244.973 220.949 245.507 221.344 246.2C221.739 246.893 221.936 247.688 221.936 248.584C221.936 249.48 221.733 250.275 221.328 250.968C220.923 251.661 220.368 252.2 219.664 252.584C218.971 252.957 218.203 253.144 217.36 253.144ZM217.36 251.56C217.829 251.56 218.267 251.448 218.672 251.224C219.088 251 219.424 250.664 219.68 250.216C219.936 249.768 220.064 249.224 220.064 248.584C220.064 247.944 219.941 247.405 219.696 246.968C219.451 246.52 219.125 246.184 218.72 245.96C218.315 245.736 217.877 245.624 217.408 245.624C216.939 245.624 216.501 245.736 216.096 245.96C215.701 246.184 215.387 246.52 215.152 246.968C214.917 247.405 214.8 247.944 214.8 248.584C214.8 249.533 215.04 250.269 215.52 250.792C216.011 251.304 216.624 251.56 217.36 251.56ZM225.867 245.672V250.552C225.867 250.883 225.942 251.123 226.091 251.272C226.251 251.411 226.518 251.48 226.891 251.48H228.011V253H226.571C225.75 253 225.12 252.808 224.683 252.424C224.246 252.04 224.027 251.416 224.027 250.552V245.672H222.987V244.184H224.027V241.992H225.867V244.184H228.011V245.672H225.867ZM233.516 253.144C232.684 253.144 231.932 252.957 231.26 252.584C230.588 252.2 230.06 251.667 229.676 250.984C229.292 250.291 229.1 249.491 229.1 248.584C229.1 247.688 229.298 246.893 229.692 246.2C230.087 245.507 230.626 244.973 231.308 244.6C231.991 244.227 232.754 244.04 233.596 244.04C234.439 244.04 235.202 244.227 235.884 244.6C236.567 244.973 237.106 245.507 237.5 246.2C237.895 246.893 238.092 247.688 238.092 248.584C238.092 249.48 237.89 250.275 237.484 250.968C237.079 251.661 236.524 252.2 235.82 252.584C235.127 252.957 234.359 253.144 233.516 253.144ZM233.516 251.56C233.986 251.56 234.423 251.448 234.828 251.224C235.244 251 235.58 250.664 235.836 250.216C236.092 249.768 236.22 249.224 236.22 248.584C236.22 247.944 236.098 247.405 235.852 246.968C235.607 246.52 235.282 246.184 234.876 245.96C234.471 245.736 234.034 245.624 233.564 245.624C233.095 245.624 232.658 245.736 232.252 245.96C231.858 246.184 231.543 246.52 231.308 246.968C231.074 247.405 230.956 247.944 230.956 248.584C230.956 249.533 231.196 250.269 231.676 250.792C232.167 251.304 232.78 251.56 233.516 251.56ZM243.095 253.144C242.402 253.144 241.778 253.021 241.223 252.776C240.679 252.52 240.247 252.179 239.927 251.752C239.607 251.315 239.437 250.829 239.415 250.296H241.303C241.335 250.669 241.511 250.984 241.831 251.24C242.162 251.485 242.573 251.608 243.063 251.608C243.575 251.608 243.97 251.512 244.247 251.32C244.535 251.117 244.679 250.861 244.679 250.552C244.679 250.221 244.519 249.976 244.199 249.816C243.89 249.656 243.394 249.48 242.711 249.288C242.05 249.107 241.511 248.931 241.095 248.76C240.679 248.589 240.317 248.328 240.007 247.976C239.709 247.624 239.559 247.16 239.559 246.584C239.559 246.115 239.698 245.688 239.975 245.304C240.253 244.909 240.647 244.6 241.159 244.376C241.682 244.152 242.279 244.04 242.951 244.04C243.954 244.04 244.759 244.296 245.367 244.808C245.986 245.309 246.317 245.997 246.359 246.872H244.535C244.503 246.477 244.343 246.163 244.055 245.928C243.767 245.693 243.378 245.576 242.887 245.576C242.407 245.576 242.039 245.667 241.783 245.848C241.527 246.029 241.399 246.269 241.399 246.568C241.399 246.803 241.485 247 241.655 247.16C241.826 247.32 242.034 247.448 242.279 247.544C242.525 247.629 242.887 247.741 243.367 247.88C244.007 248.051 244.53 248.227 244.935 248.408C245.351 248.579 245.709 248.835 246.007 249.176C246.306 249.517 246.461 249.971 246.471 250.536C246.471 251.037 246.333 251.485 246.055 251.88C245.778 252.275 245.383 252.584 244.871 252.808C244.37 253.032 243.778 253.144 243.095 253.144ZM256.294 245.672H254.662V253H252.822V245.672H251.782V244.184H252.822V243.56C252.822 242.547 253.089 241.811 253.622 241.352C254.166 240.883 255.014 240.648 256.166 240.648V242.168C255.612 242.168 255.222 242.275 254.998 242.488C254.774 242.691 254.662 243.048 254.662 243.56V244.184H256.294V245.672ZM259.735 245.464C260.002 245.016 260.354 244.669 260.791 244.424C261.239 244.168 261.767 244.04 262.375 244.04V245.928H261.911C261.196 245.928 260.652 246.109 260.279 246.472C259.916 246.835 259.735 247.464 259.735 248.36V253H257.911V244.184H259.735V245.464ZM267.876 253.144C267.044 253.144 266.292 252.957 265.62 252.584C264.948 252.2 264.42 251.667 264.036 250.984C263.652 250.291 263.46 249.491 263.46 248.584C263.46 247.688 263.657 246.893 264.052 246.2C264.446 245.507 264.985 244.973 265.668 244.6C266.35 244.227 267.113 244.04 267.956 244.04C268.798 244.04 269.561 244.227 270.244 244.6C270.926 244.973 271.465 245.507 271.86 246.2C272.254 246.893 272.452 247.688 272.452 248.584C272.452 249.48 272.249 250.275 271.844 250.968C271.438 251.661 270.884 252.2 270.18 252.584C269.486 252.957 268.718 253.144 267.876 253.144ZM267.876 251.56C268.345 251.56 268.782 251.448 269.188 251.224C269.604 251 269.94 250.664 270.196 250.216C270.452 249.768 270.58 249.224 270.58 248.584C270.58 247.944 270.457 247.405 270.212 246.968C269.966 246.52 269.641 246.184 269.236 245.96C268.83 245.736 268.393 245.624 267.924 245.624C267.454 245.624 267.017 245.736 266.612 245.96C266.217 246.184 265.902 246.52 265.668 246.968C265.433 247.405 265.316 247.944 265.316 248.584C265.316 249.533 265.556 250.269 266.036 250.792C266.526 251.304 267.14 251.56 267.876 251.56ZM284.927 244.04C285.62 244.04 286.239 244.184 286.783 244.472C287.337 244.76 287.769 245.187 288.079 245.752C288.399 246.317 288.559 247 288.559 247.8V253H286.751V248.072C286.751 247.283 286.553 246.68 286.159 246.264C285.764 245.837 285.225 245.624 284.543 245.624C283.86 245.624 283.316 245.837 282.911 246.264C282.516 246.68 282.319 247.283 282.319 248.072V253H280.511V248.072C280.511 247.283 280.313 246.68 279.919 246.264C279.524 245.837 278.985 245.624 278.303 245.624C277.62 245.624 277.076 245.837 276.671 246.264C276.276 246.68 276.079 247.283 276.079 248.072V253H274.255V244.184H276.079V245.192C276.377 244.829 276.756 244.547 277.215 244.344C277.673 244.141 278.164 244.04 278.687 244.04C279.391 244.04 280.02 244.189 280.575 244.488C281.129 244.787 281.556 245.219 281.855 245.784C282.121 245.251 282.537 244.829 283.103 244.52C283.668 244.2 284.276 244.04 284.927 244.04ZM302.972 244.184L297.564 257.144H295.676L297.468 252.856L293.996 244.184H296.028L298.508 250.904L301.084 244.184H302.972ZM308.172 253.144C307.34 253.144 306.588 252.957 305.916 252.584C305.244 252.2 304.716 251.667 304.332 250.984C303.948 250.291 303.756 249.491 303.756 248.584C303.756 247.688 303.954 246.893 304.348 246.2C304.743 245.507 305.282 244.973 305.964 244.6C306.647 244.227 307.41 244.04 308.252 244.04C309.095 244.04 309.858 244.227 310.54 244.6C311.223 244.973 311.762 245.507 312.156 246.2C312.551 246.893 312.748 247.688 312.748 248.584C312.748 249.48 312.546 250.275 312.14 250.968C311.735 251.661 311.18 252.2 310.476 252.584C309.783 252.957 309.015 253.144 308.172 253.144ZM308.172 251.56C308.642 251.56 309.079 251.448 309.484 251.224C309.9 251 310.236 250.664 310.492 250.216C310.748 249.768 310.876 249.224 310.876 248.584C310.876 247.944 310.754 247.405 310.508 246.968C310.263 246.52 309.938 246.184 309.532 245.96C309.127 245.736 308.69 245.624 308.22 245.624C307.751 245.624 307.314 245.736 306.908 245.96C306.514 246.184 306.199 246.52 305.964 246.968C305.73 247.405 305.612 247.944 305.612 248.584C305.612 249.533 305.852 250.269 306.332 250.792C306.823 251.304 307.436 251.56 308.172 251.56ZM322.536 244.184V253H320.712V251.96C320.424 252.323 320.045 252.611 319.576 252.824C319.117 253.027 318.626 253.128 318.104 253.128C317.41 253.128 316.786 252.984 316.232 252.696C315.688 252.408 315.256 251.981 314.936 251.416C314.626 250.851 314.472 250.168 314.472 249.368V244.184H316.28V249.096C316.28 249.885 316.477 250.493 316.872 250.92C317.266 251.336 317.805 251.544 318.488 251.544C319.17 251.544 319.709 251.336 320.104 250.92C320.509 250.493 320.712 249.885 320.712 249.096V244.184H322.536ZM326.766 245.464C327.033 245.016 327.385 244.669 327.822 244.424C328.27 244.168 328.798 244.04 329.406 244.04V245.928H328.942C328.228 245.928 327.684 246.109 327.31 246.472C326.948 246.835 326.766 247.464 326.766 248.36V253H324.942V244.184H326.766V245.464ZM337.063 241.16V253H335.239V241.16H337.063ZM340.386 243.016C340.055 243.016 339.778 242.904 339.554 242.68C339.33 242.456 339.218 242.179 339.218 241.848C339.218 241.517 339.33 241.24 339.554 241.016C339.778 240.792 340.055 240.68 340.386 240.68C340.706 240.68 340.978 240.792 341.202 241.016C341.426 241.24 341.538 241.517 341.538 241.848C341.538 242.179 341.426 242.456 341.202 242.68C340.978 242.904 340.706 243.016 340.386 243.016ZM341.282 244.184V253H339.458V244.184H341.282ZM345.501 245.496C345.81 245.069 346.231 244.723 346.765 244.456C347.309 244.179 347.911 244.04 348.573 244.04C349.351 244.04 350.055 244.227 350.685 244.6C351.314 244.973 351.81 245.507 352.173 246.2C352.535 246.883 352.717 247.667 352.717 248.552C352.717 249.437 352.535 250.232 352.173 250.936C351.81 251.629 351.309 252.173 350.669 252.568C350.039 252.952 349.341 253.144 348.573 253.144C347.89 253.144 347.282 253.011 346.749 252.744C346.226 252.477 345.81 252.136 345.501 251.72V253H343.677V241.16H345.501V245.496ZM350.861 248.552C350.861 247.944 350.733 247.421 350.477 246.984C350.231 246.536 349.901 246.2 349.485 245.976C349.079 245.741 348.642 245.624 348.173 245.624C347.714 245.624 347.277 245.741 346.861 245.976C346.455 246.211 346.125 246.552 345.869 247C345.623 247.448 345.501 247.976 345.501 248.584C345.501 249.192 345.623 249.725 345.869 250.184C346.125 250.632 346.455 250.973 346.861 251.208C347.277 251.443 347.714 251.56 348.173 251.56C348.642 251.56 349.079 251.443 349.485 251.208C349.901 250.963 350.231 250.611 350.477 250.152C350.733 249.693 350.861 249.16 350.861 248.552ZM356.344 245.464C356.611 245.016 356.963 244.669 357.4 244.424C357.848 244.168 358.376 244.04 358.984 244.04V245.928H358.52C357.806 245.928 357.262 246.109 356.888 246.472C356.526 246.835 356.344 247.464 356.344 248.36V253H354.52V244.184H356.344V245.464ZM360.053 248.552C360.053 247.667 360.234 246.883 360.597 246.2C360.97 245.517 361.472 244.989 362.101 244.616C362.741 244.232 363.445 244.04 364.213 244.04C364.906 244.04 365.509 244.179 366.021 244.456C366.544 244.723 366.96 245.059 367.269 245.464V244.184H369.109V253H367.269V251.688C366.96 252.104 366.538 252.451 366.005 252.728C365.472 253.005 364.864 253.144 364.181 253.144C363.424 253.144 362.73 252.952 362.101 252.568C361.472 252.173 360.97 251.629 360.597 250.936C360.234 250.232 360.053 249.437 360.053 248.552ZM367.269 248.584C367.269 247.976 367.141 247.448 366.885 247C366.64 246.552 366.314 246.211 365.909 245.976C365.504 245.741 365.066 245.624 364.597 245.624C364.128 245.624 363.69 245.741 363.285 245.976C362.88 246.2 362.549 246.536 362.293 246.984C362.048 247.421 361.925 247.944 361.925 248.552C361.925 249.16 362.048 249.693 362.293 250.152C362.549 250.611 362.88 250.963 363.285 251.208C363.701 251.443 364.138 251.56 364.597 251.56C365.066 251.56 365.504 251.443 365.909 251.208C366.314 250.973 366.64 250.632 366.885 250.184C367.141 249.725 367.269 249.192 367.269 248.584ZM373.329 245.464C373.595 245.016 373.947 244.669 374.385 244.424C374.833 244.168 375.361 244.04 375.969 244.04V245.928H375.505C374.79 245.928 374.246 246.109 373.873 246.472C373.51 246.835 373.329 247.464 373.329 248.36V253H371.505V244.184H373.329V245.464ZM385.581 244.184L380.173 257.144H378.285L380.077 252.856L376.605 244.184H378.637L381.117 250.904L383.693 244.184H385.581Z" fill="white" />
                <defs>
                    <clipPath id="clip0">
                        <rect width="80" height="80" fill="white" transform="translate(200 133)" />
                    </clipPath>
                </defs>
            </svg>
        )
    }

    render() {
        return (
            <Modal onClose={this.props.onClose} width={576} height={683} visible={this.props.visible}>
                <form onSubmit={this.handleSubmit}>
                    <div className="edit-modal-container">

                        <div  onDrop={(this.onFilesChanged)} className="edit-modal-middle-container">
                            <div className="new-post-modal-image-container">
                                <div  className="new-post-modal-load-container"> 

                                    <input className="new-post-modal-image-file-upload"
                                        id="file"
                                        type="file" 
                                        multiple

                                        accept="image/*"
                                        name="Fd"
                                        onChange={this.onFilesChanged}
                                    />

                                </div>
                                <div className="new-post-modal-background-container">
                                    {this.renderBackground()}
                                </div>
                            </div>

                        </div>
                        <div className="edit-modal-job-desc-container">

                            <div className="edit-modal-label-text">Description</div>
                            <div className="edit-modal-description-input">
                                <textarea placeholder="Description ..." value={this.state.description} className="edit-modal-input new-post-modal-input-108" name="description" onChange={this.handleChange}></textarea >
                            </div>
                        </div>
                        <div className="edit-modal-buttons-container">
                            <button className="edit-modal-white-button" onClick={this.props.onClose}>Cancel</button>
                            <input type="submit" className="edit-modal-blue-button " value="Post"></input>
                        </div>

                    </div>
                </form>
            </Modal>

        )
    }
}

export default NewPostModal;